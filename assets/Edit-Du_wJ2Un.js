import{r as s,b as P,u as w,j as e}from"./index-DGzbJXLT.js";import{c as y,i as U,j as R}from"./registerAndLogin-srQY7G39.js";import"./firebase-CLNeqrfC.js";import"./localeStorageApi-BzC0sAnb.js";const T="_editContainer_juuuu_1",L="_editTitle_juuuu_19",S="_editForm_juuuu_31",O="_editLabel_juuuu_41",E="_editTextarea_juuuu_53",k="_imageUploadContainer_juuuu_69",F="_existingImage_juuuu_81",D="_removeOldImageButton_juuuu_89",A="_addButton_juuuu_115",$="_imagePreviewContainer_juuuu_145",q="_imagePreview_juuuu_145",z="_removeButton_juuuu_175",G="_saveButton_juuuu_201",t={editContainer:T,editTitle:L,editForm:S,editLabel:O,editTextarea:E,imageUploadContainer:k,existingImage:F,removeOldImageButton:D,addButton:A,imagePreviewContainer:$,imagePreview:q,removeButton:z,saveButton:G},V=()=>{var d;const[g,i]=s.useState(!1),[u,m]=s.useState(""),[_,v]=s.useState(null),j=(d=P().state)==null?void 0:d.postData,[n,x]=s.useState(""),[l,c]=s.useState(""),p=w();s.useEffect(()=>{(async()=>{const a=await y(j.id);c(a.content),x(a),a.img&&i(!0)})()},[g]);const I=o=>{c(o.target.value)},r=s.useRef(null),C=o=>{const a=o.target.files[0];if(a){const N=URL.createObjectURL(a);m(a),v(N)}},f=()=>{m("")},h=()=>{R(n.id),i(!1)},b=async o=>{o.preventDefault(),await U(n.id,u,l,n.img,n.imgId);const a=n.id;p(`/react-regular-exam/welcome/${a}/details`,{state:{postId:a}})},B=()=>{r.current.click()};return e.jsxs("div",{className:t.editContainer,children:[e.jsx("h2",{className:t.editTitle,children:"Edit Post"}),e.jsxs("form",{onSubmit:b,className:t.editForm,children:[e.jsx("label",{className:t.editLabel,children:"Content:"}),e.jsx("textarea",{value:l,onChange:I,className:t.editTextarea}),e.jsx("label",{className:t.editLabel,children:"Image:"}),e.jsxs("div",{className:t.imageUploadContainer,children:[n.img&&e.jsxs("div",{className:t.existingImageContainer,children:[e.jsx("img",{src:n.img,alt:"Existing Post Image",className:t.existingImage}),e.jsx("button",{type:"button",className:t.removeOldImageButton,onClick:h,children:"Remove Old Image"})]}),e.jsx("button",{type:"button",className:t.addButton,onClick:B,children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:C,ref:r,style:{display:"none"}})]}),u&&e.jsxs("div",{className:t.imagePreviewContainer,children:[e.jsx("img",{src:_,alt:"Preview",className:t.imagePreview}),e.jsx("button",{type:"button",className:t.removeButton,onClick:f,children:"Remove Image"})]}),e.jsx("button",{type:"submit",className:t.saveButton,children:"Save"})]})]})};export{V as default};
