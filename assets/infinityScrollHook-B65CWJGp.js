import{r as d}from"./index-CNVTfurR.js";import{c as f,d as S,g as p}from"./firebase-CLNeqrfC.js";function L(t=6){const[a,i]=d.useState(!1),[e,u]=d.useState(1);return{fetchPosts:async(c,n)=>{try{const r=f(S,"posts"),o=(await p(r)).docs.map(s=>s.data());o.sort((s,h)=>new Date(h.meta.date)-new Date(s.meta.date)),c(o),n(o.slice(0,t))}catch(r){console.error("Грешка при взимане на постовете:",r)}},loadMorePosts:(c,n,r)=>{if(a||n.length>=c.length)return;i(!0);const l=e+1,o=c.slice(e*t,l*t);o.length>0&&(r(s=>[...s,...o]),u(l)),i(!1)},loading:a,handleSearch:(c,n,r)=>{const l=c.trim().toLowerCase();if(l==="")u(1),n(r.slice(0,e*t));else{const o=r.filter(s=>{var h;return(h=s.content)==null?void 0:h.toLowerCase().includes(l)});n(o)}}}}function x(t,a){d.useEffect(()=>{if(!(t!=null&&t.current))return;const i=()=>{const e=t.current;if(!e)return;const u=e.scrollHeight;e.scrollTop+e.clientHeight+5>=u&&a()};return t.current.addEventListener("scroll",i),()=>{t.current&&t.current.removeEventListener("scroll",i)}},[t,a])}export{x as a,L as u};
