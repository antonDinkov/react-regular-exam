import{r as d}from"./index-CHZHm0gm.js";import{c as S,d as f,g as p}from"./firebase-CLNeqrfC.js";function L(t=6){const[l,a]=d.useState(!1),[e,u]=d.useState(1);return{fetchPosts:async(s,n)=>{try{const r=S(f,"posts"),o=(await p(r)).docs.map(i=>i.data());o.sort((i,h)=>new Date(h.meta.date)-new Date(i.meta.date)),s(o),n(o.slice(0,t))}catch(r){console.error("Error loading posts:",r)}},loadMorePosts:(s,n,r)=>{if(l||n.length>=s.length)return;a(!0);const c=e+1,o=s.slice(e*t,c*t);o.length>0&&(r([...n,...o]),u(c)),a(!1)},loading:l,handleSearch:(s,n,r)=>{const c=s.trim().toLowerCase();if(c==="")u(1),n(r.slice(0,e*t));else{const o=r.filter(i=>{var h;return(h=i.content)==null?void 0:h.toLowerCase().includes(c)});n(o)}}}}function x(t,l){d.useEffect(()=>{if(!(t!=null&&t.current))return;const a=()=>{const e=t.current;if(!e)return;const u=e.scrollHeight;e.scrollTop+e.clientHeight+5>=u&&l()};return t.current.addEventListener("scroll",a),()=>{t.current&&t.current.removeEventListener("scroll",a)}},[t,l])}export{x as a,L as u};
