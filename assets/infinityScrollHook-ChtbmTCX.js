import{r as d}from"./index-C8G3tkBL.js";import{c as S,d as f,g as p}from"./firebase-CLNeqrfC.js";function L(t=6){const[l,a]=d.useState(!1),[e,i]=d.useState(1);return{fetchPosts:async(n,c)=>{try{const r=S(f,"posts"),o=(await p(r)).docs.map(u=>u.data());o.sort((u,h)=>new Date(h.meta.date)-new Date(u.meta.date)),n(o),c(o.slice(0,t))}catch(r){console.error("Грешка при взимане на постовете:",r)}},loadMorePosts:(n,c,r)=>{if(l||c.length>=n.length)return;a(!0);const s=e+1,o=n.slice(e*t,s*t);o.length>0&&(r([...c,...o]),i(s)),a(!1)},loading:l,handleSearch:(n,c,r)=>{const s=n.trim().toLowerCase();if(s==="")i(1),c(r.slice(0,e*t));else{const o=r.filter(u=>{var h;return(h=u.content)==null?void 0:h.toLowerCase().includes(s)});c(o)}}}}function x(t,l){d.useEffect(()=>{if(!(t!=null&&t.current))return;const a=()=>{const e=t.current;if(!e)return;const i=e.scrollHeight;e.scrollTop+e.clientHeight+5>=i&&l()};return t.current.addEventListener("scroll",a),()=>{t.current&&t.current.removeEventListener("scroll",a)}},[t,l])}export{x as a,L as u};
